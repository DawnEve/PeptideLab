<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Tep——翻译噬菌体展示的12肽</title>
		<style>
		body{
			font-family:Arial,"宋体";
		}
		#header,#footer{
			width:960px;
			margin:2px auto;
		}
		#input{
			font-family: monospace;
			border-color: rgb(169, 169, 169);
			width:660px; height:260px;
			float:left;
			
		}
		.red{color:red;}
		.grey{color:#bbb;}
		.HLbg{background:#FFECBF;}
		.redbg{background:red; color:#fff;}
		
		pre{float:left;
			background:#efeeef;
			padding:10px; 
			border-radius:15%;
			margin:20px;
		}
		#output{
			word-break:break-all;
			border:1px solid #0096ff;
			font-family:Courier,"宋体";
			font-size:15px;
			padding:10px 5px; 
		}
		#footer{
			clear: both;
			padding: 10px 5px;
			background: #0096ff;
			font-size:12px;
			line-height:15px;
			color:#fff;
		}
		#tips{visibility:hidden;background: #0096ff; border-radius:10px;color:#fff; padding:5px;}
		
		</style>
	</head>
	<body>
	<div id=header>
	<h2>Tep(version0.3)</h2>
	<h4> —— A tool to <span class=red>T</span>ranslate the Tw<span class=red>e</span>lve <span class=red>p</span>eptide by PhageDisplay</h4>
	<hr>
	Please input your fasta file:（请仅输入基因序列，不要输入第一行的序列说明！）<br/>
		<textarea class=input id=input>
CCGAATAGTCGTCGTTCAGACGTTAGTAATGATTTTCTGTATGGGATTTTGCTAAACAACTTTCAACAGTTTCGGCCGAA
CCTCCACCATGCTGCCAATCATACGCAACCTTATACACACCACTAGAGTGAGAATAGAAAGGTACCACTAAAGGAATTGC
GAATAATAATTTTTTCACGTTGAAAATCTCCAAAAAAAAGGCTCCAAAAGGAGCCTTTAATTGTATCGGTTTATCAGCTT
GCTTTCGAGGTGAATTTCTTAAACAGCTTGATACCGATAGTTGCGCCGACAATGACAACAACCATCGCCCACGCATAACC
GATATATTCGGTCGCTGAGGCTTGCAGGGAGTTAAAGGCCGCTTTTGCGGGATCGTCACCCTCAGCAGCGAAAGACAGCA
TCGGAACGAGGGTAGCAACGGCTACAGAGGCTTTGAGGACTAAAGACTTTTTCATGAGGAAGTTTCCATTAAACGGGTAA
AATACGTAATGCCACTACGAAGGCACCAACCTAAAACGAAAGAGGCAAAAGAATACACTAAAACACTCATCTTTGACCCC
CAGCGATTATACCAAGCGCGAAACAAAGTACAACGGAGATTTGTATCATCGCCTGATAAATTGTGTCGAAATCCGCGACC
TGCTCCATGTTACTTAGCCGGAACGAGGCGCAGACGGTCAATCATAAGGGACCCGAACTGACCAACTTTGAAAGAGGACA
GATGAACGGTGTACAGACCAGGCGCATAGGGCTGGCTGACCTTCATCAAGAGTAATCTTGACAAGAACCCGGATATTCAT
TACCCAAATCAACGTAACAAAGCTGCTCATTCAGTGAATAAGGCTTGCCCTGACGAGAAACACCAGAACGAGTAGTAAAT
TGGGCTTGAGATGGGTTTAATTTCAACTTTAATCATTGTGAATTACCTTATGCGATGTTAAGACTGGCTCATTATACCAG
TCAGGACGTTGGGAAGAAAAATCTACGTTAATAAAACGAACTAACGGGAACAACATTATTACAGGCAGAAAGAATCATCG
GTGGAGAATTTAGGAATACCCCATTCCACCTAGGGCGAGACATATACGCCCAAAGGAAATATCCGAAGGCTAGGTAAAGC
GACAGCTATCGTAGCCCCTCGTGTCTCGCGCGAGAG
</textarea>
		
<pre>
<span class=red><b>处理流程：</b></span>
1.找到头部：ACCTCCACC
2.找到尾部：AGAGTGAGAATAGAAAGG
3.截取头尾之间的DNA序列；
4.取此DNA的反向互补序列；
5.翻译；
</pre>

<div style="clear:both;"></div>

		<br/>
		<input type=button id=submit value="submit" />
		<input type=button id=reset value="reset" />
		
		<span id=tips>请刷新页面或点击reset以重新提交序列。</span>
		
		
		
		<hr>
		<div id=output></div>
</div><!--end of header-->
		
		
		<div id=footer>
			如有任何建议和意见，欢迎反馈到 jimmymall@163.com.<br>
			声明：作者尽力保证程序正确，但对结果的正确性不作任何保证；请在仔细验证后使用！<br />
			Distributed under the MIT license.
			&copy;2014 By FireCloud | 
 <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253196206'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s13.cnzz.com/z_stat.php%3Fid%3D1253196206%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script><br />
		</div><!--end of footer-->
	
	
	
	
	
	
	
	
	
	
	<!-- -------------------------------------javascript part------------------------------------>
	
	<script>
	/*
	有结果
CCGAATAGTCGTCGTTCAGACGTTAGTAATGATTTTCTGTATGGGATTTTGCTAAACAACTTTCAACAGTTTCGGCCGAA
CCTCCACCATGCTGCCAATCATACGCAACCTTATACACACCACTAGAGTGAGAATAGAAAGGTACCACTAAAGGAATTGC
GAATAATAATTTTTTCACGTTGAAAATCTCCAAAAAAAAGGCTCCAAAAGGAGCCTTTAATTGTATCGGTTTATCAGCTT
GCTTTCGAGGTGAATTTCTTAAACAGCTTGATACCGATAGTTGCGCCGACAATGACAACAACCATCGCCCACGCATAACC
GATATATTCGGTCGCTGAGGCTTGCAGGGAGTTAAAGGCCGCTTTTGCGGGATCGTCACCCTCAGCAGCGAAAGACAGCA
TCGGAACGAGGGTAGCAACGGCTACAGAGGCTTTGAGGACTAAAGACTTTTTCATGAGGAAGTTTCCATTAAACGGGTAA
AATACGTAATGCCACTACGAAGGCACCAACCTAAAACGAAAGAGGCAAAAGAATACACTAAAACACTCATCTTTGACCCC
CAGCGATTATACCAAGCGCGAAACAAAGTACAACGGAGATTTGTATCATCGCCTGATAAATTGTGTCGAAATCCGCGACC
TGCTCCATGTTACTTAGCCGGAACGAGGCGCAGACGGTCAATCATAAGGGACCCGAACTGACCAACTTTGAAAGAGGACA
GATGAACGGTGTACAGACCAGGCGCATAGGGCTGGCTGACCTTCATCAAGAGTAATCTTGACAAGAACCCGGATATTCAT
TACCCAAATCAACGTAACAAAGCTGCTCATTCAGTGAATAAGGCTTGCCCTGACGAGAAACACCAGAACGAGTAGTAAAT
TGGGCTTGAGATGGGTTTAATTTCAACTTTAATCATTGTGAATTACCTTATGCGATGTTAAGACTGGCTCATTATACCAG
TCAGGACGTTGGGAAGAAAAATCTACGTTAATAAAACGAACTAACGGGAACAACATTATTACAGGCAGAAAGAATCATCG
GTGGAGAATTTAGGAATACCCCATTCCACCTAGGGCGAGACATATACGCCCAAAGGAAATATCCGAAGGCTAGGTAAAGC
GACAGCTATCGTAGCCCCTCGTGTCTCGCGCGAGAG

	无结果

GAAAATTGGTCGTCCCTCAGACGTTAGTAAATGAATTTTCTGTATGGGATTTTGCTAAACAACTTTCAACAGTTTCGGCC
GAACCTCCACCCGACAGAGACCTACGCGAAACATCAGGCCAAGTAGCAAAGTGAGAATAGAAAGGTACCACTAAAGGAAT
TGCGAATAATAATTTTTTCACGTTGAAAATCTCCAAAAAAAAGGCTCCAAAAGGAGCCTTTAATTGTATCGGTTTATCAG
CTTGCTTTCGAGGTGAATTTCTTAAACAGCTTGATACCGATAGTTGCGCCGACAATGACAACAACCATCGCCCACGCATA
ACCGATATATTCGGTCGCTGAGGCTTGCAGGGAGTTAAAGGCCGCTTTTGCGGGATCGTCACCCTCAGCAGCGAAAGACA
GCATCGGAACCAGGGTAGCGACGGCTACTGAGGCTTTGAAGACTAAAGACTTTTTCGTGAGGAAGTTTCCATTACACGGG
TAAGATACGTACTGCCTCTACGATGGGGCGATCTTAAACTGAAAGTTGCAAACGCACACACTAAAACACGCATCCTAGAC
ATCCAGCGAGCAGAAACGCGAGTAACAAAATAGGGGGCTGATTTGTAGCATCGTGTAAGACTTAGTGTCGGAGCTGCTAC
CTGTTGAAGTTAAATTTCCGGAGCGACGGTTCCACGCCTGATCATATTATAACCCAACCCGCCTAACAAGTCACACTCAC
AGAAGAAGATGTACCTTTTAACGCCATAAAAGGTTTGTCCCCCCCCTAGAAGAGCCTTACACTGAGACGGCGAGAAAGTG
CCGAAGCAGGCGGAAGGTGGTGATTTTAAAAAGATAACCGCTTAGCATGATAATTCTGAGCCAAAAACAACAGAAAGAAT
TAGTAGGGGTTAATGACAATTTCATGTGGGCGGACTTCCCAGGGGGACAGCTAGGAGGTGGCCGATTTGGAACATCACTC
CCAGCCAGAGTCCATAGTTATTGTTCCTACCGTAGCTGATCTTTGCGGTATTAGGCAGGACCATGGCAAACCATCTTAAT
GCAAGTATATTCTCAACCAGTAACAGATT
	*/
	//工具函数
function $(s){
	if(typeof s=="object")
		return s;
	return document.getElementById(s);
}

function n(s, o){
	if(o==undefined){
		console.log(s);
	}else{
		$(o).innerHTML+=s;
	}
}

//
function separate(s){
	var temp="";
	for(i=0; i<s.length; i++){
		temp+=s.substring(i,i+1);
		temp+="&nbsp;&nbsp;";
	}
	
	return temp;
}

//求反向互补序列
function reverseCom(dna){
	var temp="";
	for(i=dna.length; i>=0; i--){
		var t = dna.substring(i,i+1);
		if(t=="A")
			temp+="T";
		if(t=="T")
			temp+="A";
			
		if(t=="G")
			temp+="C";
		if(t=="C")
			temp+="G";
	}
	return temp;
}

//翻译dna为aa单字母缩写：
function translate(dna) {
	var codens={
		"TTT":"F",  "TCT":"S",  "TAT":"Y",  "TGT":"C", 
		"TTC":"F",  "TCC":"S",  "TAC":"Y",  "TGC":"C", 
		"TTA":"L",  "TCA":"S",  "TAA":"-",  "TGA":"-", 
		"TTG":"L",  "TCG":"S",  "TAG":"-",  "TGG":"W", 

		"CTT":"L",  "CCT":"P",  "CAT":"H",  "CGT":"R", 
		"CTC":"L",  "CCC":"P",  "CAC":"H",  "CGC":"R", 
		"CTA":"L",  "CCA":"P",  "CAA":"Q",  "CGA":"R", 
		"CTG":"L",  "CCG":"P",  "CAG":"Q",  "CGG":"R", 

		"ATT":"I",  "ACT":"T",  "AAT":"N",  "AGT":"S", 
		"ATC":"I",  "ACC":"T",  "AAC":"N",  "AGC":"S", 
		"ATA":"I",  "ACA":"T",  "AAA":"K",  "AGA":"R", 
		"ATG":"M",  "ACG":"T",  "AAG":"K",  "AGG":"R", 

		"GTT":"V",  "GCT":"A",  "GAT":"D",  "GGT":"G", 
		"GTC":"V",  "GCC":"A",  "GAC":"D",  "GGC":"G", 
		"GTA":"V",  "GCA":"A",  "GAA":"E",  "GGA":"G", 
		"GTG":"V",  "GCG":"A",  "GAG":"E",  "GGG":"G"
	}

	var aa="";
	for (i = 0; i < dna.length; i=i+3) {
		var sub=dna.substring(i, i+3);
		var a=codens[sub];
		aa += a;
	}
		
	return aa;
}


//javascript
/*-----------------------------javascript单击事件----------------------------*/
window.onload=function(){
/*--------------------------------重置事件绑定------------------------------*/
	$("reset").onclick=function(){
		//$("input").innerHTML="";//不会清空用户的输入。
		$("input").value="";
		$("output").innerHTML="";
		$("tips").style.visibility="hidden";
		$("submit").disabled=false;
		$("input").focus();
	}

/*--------------------------------提交事件绑定------------------------------*/
	$("submit").onclick=function(){
//1.获取字符串
		var str0=$("input").value;
		//如果没有输入序列，则提示输入并返回null。
		if(str0.length==0){
			if($("output").innerHTML=="请输入序列。"){
				//do nothing;
			}else{
				n("请输入序列。","output");
				$("input").focus();
			}
			
			return;
		}
		
		//如果输入序列了，则进入计算步骤；
		this.disabled=true;
		$("tips").style.visibility="visible";
		
		
		//1.1怎么去掉换行？正则替换：		
		var str=str0.replace(/\r/g,'').replace(/\n/g,'');
//2.找到起始和结束
		var start=str.indexOf("ACCTCCACC")+9;
		var end=str.indexOf("AGAGTGAGAATAGAAAGG");
		
		//2.1如果没找到，则提示空。
		n("start at "+start+", end at "+end+", length:"+(end-start)+"<hr/>","output");
		var str_highlight=str;
		if(start==8){
			n("没找到开头。<br/>","output");
			return;
		};
		if(end==-1){
			n("没找到结尾。<br/>","output");
			return;
		};
		if(start>end){
			n("没找到目的序列。","output");
			return;
		}
		//不合理结果过滤完毕
		str_highlight=str.replace(/ACCTCCACC/,"<span class=HLbg>ACCTCCACC</span><span class=redbg>")
						.replace(/AGAGTGAGAATAGAAAGG/,"</span><span class=HLbg>AGAGTGAGAATAGAAAGG</span>");

//3.找到子字符串，反向、互补；
		n("<span class=grey>碱基编号："+start+" - "+end+": "+"123456789012345678901234567890123456</span>"+"<br/>","output");
		var sub=str.substring(start,end);//含首不含尾//
		n("目标序列："+start+" - "+end+": <span class=redbg>"+sub+"</span><br/>","output");
		var reverseComStr=reverseCom(sub);//反向互补序列
		n("反向互补："+start+" - "+end+": "+reverseComStr+"<br/>","output");
		//n("<br/>","output");
//4.翻译并输出
		var aa=translate(reverseComStr);
		n("氨基酸&nbsp;&nbsp;："+start+" - "+end+": "+separate(aa)+"<br/>", "output");
		n("压缩后&nbsp;&nbsp;："+start+" - "+end+": <span class=red>"+aa+"</span><br />","output");
		
	//4.1高亮显示起始位置；
		//str_highlight=str.replace(/ACCTCCACC/,"<span class=HLbg>ACCTCCACC</span>").replace(/AGAGTGAGAATAGAAAGG/,"<span class=HLbg>AGAGTGAGAATAGAAAGG</span>");
		n("<hr/>原始序列: "+str.length+"bp<br />"+str_highlight,"output");//作为一个保证，这个放到最后打印

	};
};
	</script>
	</body>
</html>
